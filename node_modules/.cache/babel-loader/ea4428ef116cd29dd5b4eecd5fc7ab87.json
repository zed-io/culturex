{"ast":null,"code":"import _slicedToArray from\"/Users/mvps/culturex/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/Users/mvps/culturex/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mvps/culturex/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{atomFamily,selectorFamily,useRecoilState}from\"recoil\";import{fetchAccountItems}from\"../flow/fetch-account-items.script\";import{IDLE,PROCESSING}from\"../global/constants\";export var $state=atomFamily({key:\"account-items::state\",default:selectorFamily({key:\"account-items::default\",get:function get(address){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",fetchAccountItems(address));case 1:case\"end\":return _context.stop();}}},_callee);}));}})});export var $status=atomFamily({key:\"account-items::status\",default:IDLE});export function useAccountItems(address){var _useRecoilState=useRecoilState($state(address)),_useRecoilState2=_slicedToArray(_useRecoilState,2),items=_useRecoilState2[0],setItems=_useRecoilState2[1];var _useRecoilState3=useRecoilState($status(address)),_useRecoilState4=_slicedToArray(_useRecoilState3,2),status=_useRecoilState4[0],setStatus=_useRecoilState4[1];function refresh(){return _refresh.apply(this,arguments);}function _refresh(){_refresh=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setStatus(PROCESSING);_context3.next=3;return fetchAccountItems(address).then(setItems);case 3:setStatus(IDLE);case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _refresh.apply(this,arguments);}return{ids:items,status:status,refresh:refresh,mint:function mint(){return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setStatus(PROCESSING);_context2.next=3;return fetch(process.env.REACT_APP_API_KITTY_ITEM_MINT,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({recipient:address,typeId:2})});case 3:_context2.next=5;return fetchAccountItems(address).then(setItems);case 5:setStatus(IDLE);case 6:case\"end\":return _context2.stop();}}},_callee2);}))();}};}","map":{"version":3,"sources":["/Users/mvps/culturex/web/src/hooks/use-account-items.hook.js"],"names":["atomFamily","selectorFamily","useRecoilState","fetchAccountItems","IDLE","PROCESSING","$state","key","default","get","address","$status","useAccountItems","items","setItems","status","setStatus","refresh","then","ids","mint","fetch","process","env","REACT_APP_API_KITTY_ITEM_MINT","method","headers","body","JSON","stringify","recipient","typeId"],"mappings":"0aAAA,OAAQA,UAAR,CAAoBC,cAApB,CAAoCC,cAApC,KAAyD,QAAzD,CACA,OAAQC,iBAAR,KAAgC,oCAAhC,CACA,OAAQC,IAAR,CAAcC,UAAd,KAA+B,qBAA/B,CAEA,MAAO,IAAMC,CAAAA,MAAM,CAAGN,UAAU,CAAC,CAC/BO,GAAG,CAAE,sBAD0B,CAE/BC,OAAO,CAAEP,cAAc,CAAC,CACtBM,GAAG,CAAE,wBADiB,CAEtBE,GAAG,CAAE,aAAAC,OAAO,6EAAI,mKAAYP,iBAAiB,CAACO,OAAD,CAA7B,wDAAJ,IAFU,CAAD,CAFQ,CAAD,CAAzB,CAQP,MAAO,IAAMC,CAAAA,OAAO,CAAGX,UAAU,CAAC,CAChCO,GAAG,CAAE,uBAD2B,CAEhCC,OAAO,CAAEJ,IAFuB,CAAD,CAA1B,CAKP,MAAO,SAASQ,CAAAA,eAAT,CAAyBF,OAAzB,CAAkC,qBACbR,cAAc,CAACI,MAAM,CAACI,OAAD,CAAP,CADD,oDAChCG,KADgC,qBACzBC,QADyB,0CAEXZ,cAAc,CAACS,OAAO,CAACD,OAAD,CAAR,CAFH,qDAEhCK,MAFgC,qBAExBC,SAFwB,6BAIxBC,CAAAA,OAJwB,+HAIvC,wIACED,SAAS,CAACX,UAAD,CAAT,CADF,uBAEQF,CAAAA,iBAAiB,CAACO,OAAD,CAAjB,CAA2BQ,IAA3B,CAAgCJ,QAAhC,CAFR,QAGEE,SAAS,CAACZ,IAAD,CAAT,CAHF,wDAJuC,0CAUvC,MAAO,CACLe,GAAG,CAAEN,KADA,CAELE,MAAM,CAANA,MAFK,CAGLE,OAAO,CAAPA,OAHK,CAICG,IAJD,gBAIQ,wMACXJ,SAAS,CAACX,UAAD,CAAT,CADW,uBAELgB,CAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,6BAAb,CAA4C,CACrDC,MAAM,CAAE,MAD6C,CAErDC,OAAO,CAAE,CACP,eAAgB,kBADT,CAF4C,CAKrDC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBC,SAAS,CAAEpB,OADQ,CAEnBqB,MAAM,CAAE,CAFW,CAAf,CAL+C,CAA5C,CAFA,+BAYL5B,CAAAA,iBAAiB,CAACO,OAAD,CAAjB,CAA2BQ,IAA3B,CAAgCJ,QAAhC,CAZK,QAaXE,SAAS,CAACZ,IAAD,CAAT,CAbW,6DAcZ,CAlBI,CAAP,CAoBD","sourcesContent":["import {atomFamily, selectorFamily, useRecoilState} from \"recoil\"\nimport {fetchAccountItems} from \"../flow/fetch-account-items.script\"\nimport {IDLE, PROCESSING} from \"../global/constants\"\n\nexport const $state = atomFamily({\n  key: \"account-items::state\",\n  default: selectorFamily({\n    key: \"account-items::default\",\n    get: address => async () => fetchAccountItems(address),\n  }),\n})\n\nexport const $status = atomFamily({\n  key: \"account-items::status\",\n  default: IDLE,\n})\n\nexport function useAccountItems(address) {\n  const [items, setItems] = useRecoilState($state(address))\n  const [status, setStatus] = useRecoilState($status(address))\n\n  async function refresh() {\n    setStatus(PROCESSING)\n    await fetchAccountItems(address).then(setItems)\n    setStatus(IDLE)\n  }\n\n  return {\n    ids: items,\n    status,\n    refresh,\n    async mint() {\n      setStatus(PROCESSING)\n      await fetch(process.env.REACT_APP_API_KITTY_ITEM_MINT, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          recipient: address,\n          typeId: 2,\n        }),\n      })\n      await fetchAccountItems(address).then(setItems)\n      setStatus(IDLE)\n    },\n  }\n}\n"]},"metadata":{},"sourceType":"module"}